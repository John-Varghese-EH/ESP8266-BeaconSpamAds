<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Beacon Spam Admin</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <h1>âš¡ Beacon Spam</h1>

  <div class="status">
    <strong>Status:</strong> <span id="statusText">Running</span><br>
    <strong>SSIDs:</strong> <span id="ssidCount">...</span> |
    <strong>Clients:</strong> <span id="clientCount">...</span> |
    <strong>RAM:</strong> <span id="freeHeap">...</span> |
    <strong>Uptime:</strong> <span id="uptime">...</span>s
  </div>

  <!-- Theme Toggle -->
  <div class="theme-toggle">
    <button onclick="toggleTheme()" id="themeBtn">ğŸŒ™ Dark Mode</button>
  </div>

  <!-- Connected Clients -->
  <div class="card">
    <div class="section-title">Connected Clients</div>
    <div id="clientsList" style="font-family: monospace; font-size: 0.9rem;"></div>
    <button type="button" onclick="refreshClients()" style="margin-top:10px;">ğŸ”„ Refresh</button>
  </div>

  <!-- Access Point -->
  <div class="card">
    <div class="section-title">Access Point</div>
    <label>AP Name (Network Name)</label>
    <input type="text" id="apName" placeholder="Free WiFi">
    <div class="hint">The name users see when scanning for Wi-Fi networks</div>
    <label><input type="checkbox" id="hideAP"> Hide AP from network lists</label>
    <div class="hint">Experimental: May not work on all devices</div>
  </div>

  <!-- Portal Advertising -->
  <div class="card">
    <div class="section-title">Portal Advertising</div>
    <label>Headline</label>
    <input type="text" id="advertisingHeadline" placeholder="Welcome to Free Wi-Fi!">
    <label>Description</label>
    <input type="text" id="advertisingDescription" placeholder="Click below to get exclusive access!">
    <label>Button Text</label>
    <input type="text" id="buttonText" placeholder="Connect Now">
    <label><input type="checkbox" id="disableButton"> Disable Button (Full Screen Mode)</label>
    <div class="hint">Check this to hide the footer and make the iframe full screen.</div>
    <label>Redirect URL</label>
    <input type="text" id="redirectUrl" placeholder="https://github.com/John-Varghese-EH">
    <div class="hint">Where users go after clicking the button</div>
    <label>Auto-Redirect Delay (seconds)</label>
    <input type="number" id="autoRedirectDelay" value="0" min="0">
    <div class="hint">0 = disabled, users must click the button</div>
  </div>

  <!-- Spam Settings -->
  <div class="card">
    <div class="section-title">Spam Settings</div>
    <label><input type="checkbox" id="wpa2"> Enable WPA2 (Encrypted Networks)</label>
    <label><input type="checkbox" id="appendSpaces"> Append Spaces (Performance)</label>
    <label><input type="checkbox" id="enableBLE"> Enable BLE Spam (ESP32 Only)</label>
    <label><input type="checkbox" id="randomizeMAC"> Randomize MAC Addresses</label>
    <div class="hint">Generate random source MAC for each beacon</div>
    <label>Beacon Interval (ms)</label>
    <input type="number" id="beaconInterval" value="100" min="10">
    <div class="hint">Lower = more spam, higher battery usage</div>
    <label>WiFi Channel (1-14)</label>
    <input type="number" id="wifiChannel" value="1" min="1" max="14">
    <div class="hint">Channel to broadcast beacons on</div>
    <br>
    <button type="button" onclick="saveConfig()">ğŸ’¾ Save All Settings</button>
  </div>

  <!-- SSID List -->
  <div class="card">
    <div class="section-title">SSID List</div>
    <p style="color: var(--text-secondary); margin: 0 0 10px 0; font-size: 0.9rem;">One SSID per line. Max 32 characters
      each.</p>
    <p style="color: var(--accent); margin: 0 0 10px 0; font-size: 0.85rem;">ğŸ”— <strong>Deep Links:</strong> Add custom
      URL with <code>SSID|https://url.com</code></p>
    <div class="preset-grid">
      <button type="button" class="preset-btn" onclick="generateRandomSSIDs()">ğŸ² Random</button>
      <button type="button" class="preset-btn" onclick="loadPreset('funny')">ğŸ˜‚ Funny</button>
      <button type="button" class="preset-btn" onclick="loadPreset('scary')">ğŸ‘» Scary</button>
      <button type="button" class="preset-btn" onclick="loadPreset('memes')">ğŸ¸ Memes</button>
      <button type="button" class="preset-btn" onclick="loadPreset('pop_culture')">ğŸ“º Pop Culture</button>
      <button type="button" class="preset-btn" onclick="loadPreset('trolling')">ğŸ˜ˆ Trolling</button>
    </div>
    <textarea id="ssidList"
      placeholder="FBI Surveillance Van&#10;Free WiFi|https://example.com&#10;Starbucks Guest"></textarea>
    <br>
    <button type="button" onclick="saveSSIDs()">ğŸ’¾ Save SSIDs</button>
  </div>

  <!-- Export/Import -->
  <div class="card">
    <div class="section-title">Backup & Restore</div>
    <p style="color: var(--text-secondary); margin: 0 0 10px 0; font-size: 0.9rem;">Export or import all settings
      including SSIDs.</p>
    <button type="button" onclick="exportConfig()">ğŸ“¤ Export Config</button>
    <button type="button" onclick="document.getElementById('importFile').click()">ğŸ“¥ Import Config</button>
    <input type="file" id="importFile" accept=".json" style="display:none" onchange="importConfig(event)">
  </div>

  <!-- Portal HTML Editor -->
  <div class="card">
    <div class="section-title">Custom Content Editor</div>
    <p style="color: var(--text-secondary); margin: 0 0 10px 0; font-size: 0.9rem;">
      Enter your custom HTML content (text, images, ads) to be shown inside the portal.
      <br>The <strong>Connect Button</strong> and Footer are added automatically.
    </p>
    <label><input type="checkbox" id="useCustomPortal"> Enable Custom Content</label>
    <div class="hint">If disabled, the default logo and features list will be shown.</div>
    <textarea id="portalHtml" placeholder="<h1>Special Offer!</h1><p>Free WiFi for you...</p>"
      style="height: 200px; font-family: monospace; font-size: 0.8rem;"></textarea>

    <label style="margin-top:15px;display:block;">Main portal raw HTML code</label>
    <div
      style="border: 2px dashed var(--border); border-radius: 8px; background: #fff; height: 700px; overflow: hidden; margin-bottom: 10px;">
      <iframe id="previewFrame" sandbox="allow-scripts allow-same-origin"
        style="width: 100%; height: 100%; border: none;"></iframe>
    </div>
    <div style="margin-top: 10px;">
      <button type="button" onclick="loadDefaultPortalHTML()">ğŸ“„ Load Default</button>
      <button type="button" onclick="savePortalHTML()">ğŸ’¾ Save HTML</button>
      <button type="button" onclick="resetPortalHTML()" class="danger" style="margin-left: 10px;">ğŸ—‘ï¸ Reset to
        Default</button>
    </div>
    <div class="hint" style="margin-top: 10px;">ğŸ’¡ After saving, toggle "Use Custom Portal" and save settings for
      changes to take effect.</div>
  </div>

  <!-- Admin Credentials -->
  <div class="card">
    <div class="section-title">Admin Credentials</div>
    <p style="color: var(--text-secondary); margin: 0 0 10px 0; font-size: 0.9rem;">Change the login for this admin
      panel.</p>
    <label>Username</label>
    <input type="text" id="adminUser" placeholder="admin">
    <label>Password</label>
    <input type="password" id="adminPass" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
    <br>
    <button type="button" onclick="saveCredentials()">ğŸ” Update Credentials</button>
  </div>

  <!-- System -->
  <div class="card">
    <div class="section-title">System</div>
    <button class="danger" onclick="reboot()">ğŸ”„ Reboot ESP</button>
  </div>

  <footer>
    <strong>ESP Beacon Spam</strong><br>
    Made with â¤ï¸ by <a href="https://github.com/John-Varghese-EH" target="_blank">John-Varghese-EH</a>
  </footer>

  <script src="app.js"></script>
</body>

</html>