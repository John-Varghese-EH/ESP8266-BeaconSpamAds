#pragma once

// ESP Beacon Spam Web Interface - Auto-generated
// Built: 2026-02-02 15:04:10
// Edit files in web/ then run: python utils/build_web.py

const char admin_html[] PROGMEM = R"rawliteral(<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Beacon Spam Admin</title><style>:root{--bg:#0d1117;--card-bg:#161b22;--border:#30363d;--text:#c9d1d9;--text-secondary:#8b949e;--accent:#58a6ff;--btn-bg:#238636;--btn-hover:#2ea043;--danger:#f85149;--danger-hover:#da3633;--input-bg:#0d1117}.light-mode{--bg:#f6f8fa;--card-bg:#ffffff;--border:#d0d7de;--text:#1f2328;--text-secondary:#656d76;--accent:#0969da;--btn-bg:#2da44e;--btn-hover:#218838;--danger:#cf222e;--danger-hover:#a40e26;--input-bg:#ffffff}*{box-sizing:border-box;margin:0;padding:0}body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;background:var(--bg);color:var(--text);padding:20px;max-width:600px;margin:0 auto;transition:background 0.3s,color 0.3s}h1{font-size:1.8rem;margin-bottom:15px;text-align:center}.theme-toggle{text-align:center;margin-bottom:15px}.theme-toggle button{background:transparent;border:1px solid var(--border);color:var(--text);padding:8px 16px;border-radius:6px;cursor:pointer;font-size:0.9rem}.theme-toggle button:hover{background:var(--card-bg)}.status{background:var(--card-bg);border:1px solid var(--border);border-radius:8px;padding:15px;margin-bottom:15px;font-size:0.9rem;line-height:1.6}.card{background:var(--card-bg);border:1px solid var(--border);border-radius:8px;padding:20px;margin-bottom:15px}.section-title{font-size:1.1rem;font-weight:600;margin-bottom:15px;padding-bottom:10px;border-bottom:1px solid var(--border)}label{display:block;margin:10px 0 5px;font-size:0.9rem;color:var(--text)}input[type="text"],input[type="password"],input[type="number"]{width:100%;padding:10px 12px;border:1px solid var(--border);border-radius:6px;background:var(--input-bg);color:var(--text);font-size:0.95rem}input:focus{outline:none;border-color:var(--accent)}input[type="checkbox"]{margin-right:8px;vertical-align:middle}textarea{width:100%;height:150px;padding:10px 12px;border:1px solid var(--border);border-radius:6px;background:var(--input-bg);color:var(--text);font-family:monospace;font-size:0.9rem;resize:vertical}textarea:focus{outline:none;border-color:var(--accent)}.hint{font-size:0.8rem;color:var(--text-secondary);margin-top:4px}button{padding:10px 20px;background:var(--btn-bg);color:white;border:none;border-radius:6px;font-size:0.95rem;cursor:pointer;transition:background 0.2s;margin-top:10px}button:hover{background:var(--btn-hover)}button.danger{background:var(--danger)}button.danger:hover{background:var(--danger-hover)}footer{margin-top:30px;text-align:center;font-size:0.85rem;color:var(--text-secondary);padding:20px}footer a{color:var(--accent);text-decoration:none}footer a:hover{text-decoration:underline}table{width:100%;border-collapse:collapse}table th,table td{padding:8px;text-align:left;border-bottom:1px solid var(--border)}table th{color:var(--text-secondary);font-weight:600;font-size:0.85rem}</style></head><body><h1>‚ö° Beacon Spam</h1><div class="status"><strong>Status:</strong><span id="statusText">Running</span><br><strong>SSIDs:</strong><span id="ssidCount">...</span> | <strong>Clients:</strong><span id="clientCount">...</span> | <strong>Uptime:</strong><span id="uptime">...</span>s </div><div class="theme-toggle"><button onclick="toggleTheme()" id="themeBtn">üåô Dark Mode</button></div><div class="card"><div class="section-title">Connected Clients</div><div id="clientsList" style="font-family: monospace; font-size: 0.9rem;"></div><button type="button" onclick="refreshClients()" style="margin-top:10px;">üîÑ Refresh</button></div><div class="card"><div class="section-title">Access Point</div><label>AP Name (Network Name)</label><input type="text" id="apName" placeholder="Free WiFi"><div class="hint">The name users see when scanning for Wi-Fi networks</div><label><input type="checkbox" id="hideAP"> Hide AP from network lists</label><div class="hint">Experimental: May not work on all devices</div></div><div class="card"><div class="section-title">Portal Advertising</div><label>Headline</label><input type="text" id="advertisingHeadline" placeholder="Welcome to Free Wi-Fi!"><label>Description</label><input type="text" id="advertisingDescription" placeholder="Click below to get exclusive access!"><label>Button Text</label><input type="text" id="buttonText" placeholder="Connect Now"><label>Redirect URL</label><input type="text" id="redirectUrl" placeholder="https://github.com/John-Varghese-EH"><div class="hint">Where users go after clicking the button</div><label>Auto-Redirect Delay (seconds)</label><input type="number" id="autoRedirectDelay" value="0" min="0"><div class="hint">0 = disabled, users must click the button</div></div><div class="card"><div class="section-title">Spam Settings</div><label><input type="checkbox" id="wpa2"> Enable WPA2 (Encrypted Networks)</label><label><input type="checkbox" id="appendSpaces"> Append Spaces (Performance)</label><label><input type="checkbox" id="enableBLE"> Enable BLE Spam (ESP32 Only)</label><label><input type="checkbox" id="randomizeMAC"> Randomize MAC Addresses</label><div class="hint">Generate random source MAC for each beacon</div><label>Beacon Interval (ms)</label><input type="number" id="beaconInterval" value="100" min="10"><div class="hint">Lower = more spam, higher battery usage</div><label>WiFi Channel (1-14)</label><input type="number" id="wifiChannel" value="1" min="1" max="14"><div class="hint">Channel to broadcast beacons on</div><br><button type="button" onclick="saveConfig()">üíæ Save All Settings</button></div><div class="card"><div class="section-title">SSID List</div><p style="color: var(--text-secondary); margin: 0 0 10px 0; font-size: 0.9rem;">One SSID per line. Max 32 characters each.</p><div style="margin-bottom: 10px;"><button type="button" onclick="generateRandomSSIDs()" style="font-size: 0.85rem; padding: 6px 12px;">üé≤ Generate Random</button><button type="button" onclick="loadPreset('funny')" style="font-size: 0.85rem; padding: 6px 12px;">üòÇ Funny</button><button type="button" onclick="loadPreset('scary')" style="font-size: 0.85rem; padding: 6px 12px;">üëª Scary</button><button type="button" onclick="loadPreset('memes')" style="font-size: 0.85rem; padding: 6px 12px;">üê∏ Memes</button></div><textarea id="ssidList" placeholder="FBI Surveillance Van&#10;Free WiFi&#10;Definitely Not Malware"></textarea><br><button type="button" onclick="saveSSIDs()">üíæ Save SSIDs</button></div><div class="card"><div class="section-title">Backup & Restore</div><p style="color: var(--text-secondary); margin: 0 0 10px 0; font-size: 0.9rem;">Export or import all settings including SSIDs.</p><button type="button" onclick="exportConfig()">üì§ Export Config</button><button type="button" onclick="document.getElementById('importFile').click()">üì• Import Config</button><input type="file" id="importFile" accept=".json" style="display:none" onchange="importConfig(event)"></div><div class="card"><div class="section-title">Admin Credentials</div><p style="color: var(--text-secondary); margin: 0 0 10px 0; font-size: 0.9rem;">Change the login for this admin panel.</p><label>Username</label><input type="text" id="adminUser" placeholder="admin"><label>Password</label><input type="password" id="adminPass" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"><br><button type="button" onclick="saveCredentials()">üîê Update Credentials</button></div><div class="card"><div class="section-title">System</div><button class="danger" onclick="reboot()">üîÑ Reboot ESP</button></div><footer><strong>ESP8266 Beacon Spam</strong><br> Made with ‚ù§Ô∏è by <a href="https://github.com/John-Varghese-EH" target="_blank">John-Varghese-EH</a></footer><script>const presets = { funny: [ "FBI Surveillance Van #42", "Definitely Not a Virus", "Pretty Fly for a WiFi", "Mom Use This One", "No Free WiFi Here", "Get Your Own WiFi", "Nacho WiFi", "The LAN Before Time", "It Burns When IP", "Drop It Like Its Hotspot", "Silence of the LANs", "LAN of Milk and Honey", "John Wilkes Bluetooth", "Abraham Linksys" ], scary: [ "Virus Distribution Center", "FBI Surveillance Van", "NSA Listening Post", "POLICE_STAKEOUT_VAN", "DEA Surveillance #4128", "CIA Black Site", "Hack Me If You Can", "MALWARE_INJECTION_POINT", "Your Data Is Ours", "We Can See You", "Identity Theft Network", "Credit Card Collector" ], memes: [ "Hide Yo Kids Hide Yo WiFi", "Yell POTATO for Password", "Loading...", "Error 404 WiFi Not Found", "WiFi Name Here", "Tell My WiFi Love Her", "Bill Wi the Science Fi", "Martin Router King Jr", "The Password Is Password", "8Hz WAN IP", "Ermahgerd Werfer", "Doge Network Much Secure" ] }; const randomWords = { adjectives: ['Free', 'Fast', 'Secure', 'Premium', 'Super', 'Ultra', 'Mega', 'Turbo', 'Pro', 'VIP'], nouns: ['WiFi', 'Internet', 'Network', 'Hotspot', 'Connection', 'Access', 'Link'], places: ['Cafe', 'Hotel', 'Airport', 'Library', 'Office', 'Guest', 'Public', 'Home'], suffixes: ['5G', 'Plus', 'Max', 'Lite', 'Go', 'Now', '2.4GHz', '5GHz'] }; function generateRandomSSIDs() { const ssids = []; for (let i = 0; i < 20; i++) { const type = Math.floor(Math.random() * 3); let ssid; if (type === 0) { ssid = randomWords.adjectives[Math.floor(Math.random() * randomWords.adjectives.length)] + ' ' + randomWords.nouns[Math.floor(Math.random() * randomWords.nouns.length)]; } else if (type === 1) { ssid = randomWords.places[Math.floor(Math.random() * randomWords.places.length)] + ' ' + randomWords.nouns[Math.floor(Math.random() * randomWords.nouns.length)]; } else { ssid = randomWords.nouns[Math.floor(Math.random() * randomWords.nouns.length)] + ' ' + randomWords.suffixes[Math.floor(Math.random() * randomWords.suffixes.length)]; } if (Math.random() > 0.5) ssid += ' ' + Math.floor(Math.random() * 100); ssids.push(ssid); } document.getElementById('ssidList').value = ssids.join('\n'); } function loadPreset(name) { if (presets[name]) { document.getElementById('ssidList').value = presets[name].join('\n'); } } function toggleTheme() { const body = document.body; const isDark = body.classList.toggle('light-mode'); localStorage.setItem('theme', isDark ? 'light' : 'dark'); document.getElementById('themeBtn').innerText = isDark ? 'üåô Dark Mode' : '‚òÄÔ∏è Light Mode'; } function applySavedTheme() { const saved = localStorage.getItem('theme'); if (saved === 'light') { document.body.classList.add('light-mode'); document.getElementById('themeBtn').innerText = 'üåô Dark Mode'; } } function loadData() { fetch('/api/data') .then(res => res.json()) .then(data => { document.getElementById('ssidCount').innerText = data.ssidCount; document.getElementById('uptime').innerText = data.uptime; document.getElementById('clientCount').innerText = data.clientCount; document.getElementById('wpa2').checked = data.wpa2; document.getElementById('appendSpaces').checked = data.appendSpaces; document.getElementById('enableBLE').checked = data.enableBLE; document.getElementById('beaconInterval').value = data.beaconInterval; document.getElementById('ssidList').value = data.ssids; document.getElementById('redirectUrl').value = data.redirectUrl || ''; document.getElementById('advertisingHeadline').value = data.advertisingHeadline || ''; document.getElementById('advertisingDescription').value = data.advertisingDescription || ''; document.getElementById('buttonText').value = data.buttonText || 'Connect'; document.getElementById('autoRedirectDelay').value = data.autoRedirectDelay || 0; document.getElementById('apName').value = data.apName || 'Free WiFi'; document.getElementById('hideAP').checked = data.hideAP || false; document.getElementById('wifiChannel').value = data.wifiChannel || 1; document.getElementById('randomizeMAC').checked = data.randomizeMAC || false; document.getElementById('adminUser').value = data.adminUser || 'admin'; document.getElementById('adminPass').value = ''; }) .catch(err => console.error('Error loading data:', err)); refreshClients(); } function refreshClients() { fetch('/api/clients') .then(res => res.json()) .then(data => { const el = document.getElementById('clientsList'); if (data.clients && data.clients.length > 0) { let html = '<table style="width:100%;border-collapse:collapse;">'; html += '<tr><th style="text-align:left;">MAC Address</th><th style="text-align:left;">IP Address</th></tr>'; data.clients.forEach(c => { html += `<tr><td>${c.mac}</td><td>${c.ip}</td></tr>`; }); html += '</table>'; el.innerHTML = html; } else { el.innerHTML = '<p style="color:var(--text-secondary);">No clients connected</p>'; } document.getElementById('clientCount').innerText = data.total || 0; }) .catch(err => { document.getElementById('clientsList').innerHTML = '<p style="color:#f85149;">Error loading clients</p>'; }); } function saveConfig() { const data = { wpa2: document.getElementById('wpa2').checked, appendSpaces: document.getElementById('appendSpaces').checked, enableBLE: document.getElementById('enableBLE').checked, beaconInterval: parseInt(document.getElementById('beaconInterval').value), redirectUrl: document.getElementById('redirectUrl').value, advertisingHeadline: document.getElementById('advertisingHeadline').value, advertisingDescription: document.getElementById('advertisingDescription').value, buttonText: document.getElementById('buttonText').value, autoRedirectDelay: parseInt(document.getElementById('autoRedirectDelay').value), apName: document.getElementById('apName').value, hideAP: document.getElementById('hideAP').checked, wifiChannel: parseInt(document.getElementById('wifiChannel').value), randomizeMAC: document.getElementById('randomizeMAC').checked }; const formData = new FormData(); formData.append('data', JSON.stringify(data)); fetch('/api/save_config', { method: 'POST', body: formData }) .then(res => res.text()) .then(txt => { alert(txt); loadData(); }) .catch(err => alert('Error saving config: ' + err)); } function saveCredentials() { const user = document.getElementById('adminUser').value; const pass = document.getElementById('adminPass').value; if (!user || !pass) { alert('Please enter both username and password'); return; } const data = { adminUser: user, adminPass: pass }; const formData = new FormData(); formData.append('data', JSON.stringify(data)); fetch('/api/save_config', { method: 'POST', body: formData }) .then(res => res.text()) .then(txt => { alert('Credentials updated! Please log in again.'); window.location.href = '/admin'; }) .catch(err => alert('Error saving credentials: ' + err)); } function saveSSIDs() { const ssids = document.getElementById('ssidList').value; const formData = new FormData(); formData.append('ssids', ssids); fetch('/api/save_ssids', { method: 'POST', body: formData }) .then(res => res.text()) .then(txt => { alert(txt); loadData(); }) .catch(err => alert('Error saving SSIDs: ' + err)); } function exportConfig() { window.location.href = '/api/export'; } function importConfig(event) { const file = event.target.files[0]; if (!file) return; const reader = new FileReader(); reader.onload = function (e) { const formData = new FormData(); formData.append('data', e.target.result); fetch('/api/import', { method: 'POST', body: formData }) .then(res => res.text()) .then(txt => { alert(txt); loadData(); }) .catch(err => alert('Error importing config: ' + err)); }; reader.readAsText(file); event.target.value = ''; // Reset file input } function reboot() { if (confirm('Reboot the device?')) { fetch('/api/reboot', { method: 'POST' }); alert('Rebooting... Please wait a few seconds.'); } } document.addEventListener('DOMContentLoaded', function () { applySavedTheme(); loadData(); });</script></body></html>)rawliteral";
const char portal_html[] PROGMEM = R"rawliteral(<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" /><title>ESP8266 Beacon Spam</title><style> :root { --bg: #0d1117; --card: #161b22; --border: #30363d; --text: #c9d1d9; --text-dim: #8b949e; --accent: #58a6ff; --success: #238636; --warning: #d29922; --btn-gradient: linear-gradient(135deg, #238636 0%, #2ea043 100%); } * { box-sizing: border-box; margin: 0; padding: 0; } body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background: var(--bg); color: var(--text); min-height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 20px; } .container { background: var(--card); border: 1px solid var(--border); border-radius: 16px; padding: 35px 30px; max-width: 400px; width: 100%; text-align: center; box-shadow: 0 16px 48px rgba(0, 0, 0, 0.4); } .logo { font-size: 42px; margin-bottom: 12px; } h1 { font-size: 1.5rem; font-weight: 600; margin-bottom: 10px; } .description { color: var(--text-dim); font-size: 0.9rem; line-height: 1.5; margin-bottom: 20px; } .features { text-align: left; margin-bottom: 20px; padding: 12px 15px; background: rgba(88, 166, 255, 0.08); border-radius: 8px; border: 1px solid rgba(88, 166, 255, 0.15); } .features div { padding: 5px 0; font-size: 0.85rem; color: var(--text-dim); } .features span { margin-right: 8px; } /* Main Button */ .btn { display: flex; align-items: center; justify-content: center; gap: 10px; width: 100%; padding: 16px 24px; background: var(--btn-gradient); color: white; border-radius: 10px; font-weight: 600; font-size: 1.05rem; border: none; cursor: pointer; transition: all 0.2s ease; position: relative; overflow: hidden; } .btn:hover { transform: translateY(-2px); box-shadow: 0 8px 24px rgba(35, 134, 54, 0.4); } .btn:active { transform: scale(0.98); } .btn.loading { pointer-events: none; opacity: 0.8; } .btn .spinner { display: none; width: 18px; height: 18px; border: 2px solid rgba(255, 255, 255, 0.3); border-top-color: white; border-radius: 50%; animation: spin 0.8s linear infinite; } .btn.loading .spinner { display: inline-block; } .btn.loading .btn-text { display: none; } @keyframes spin { to { transform: rotate(360deg); } } /* Shake animation for failed redirect */ @keyframes shake { 0%, 100% { transform: translateX(0); } 20%, 60% { transform: translateX(-8px); } 40%, 80% { transform: translateX(8px); } } .btn.shake { animation: shake 0.5s ease; } /* URL Fallback Section */ .url-section { margin-top: 18px; padding: 15px; background: rgba(88, 166, 255, 0.08); border: 1px solid rgba(88, 166, 255, 0.2); border-radius: 10px; display: none; } .url-section.show { display: block; animation: fadeIn 0.3s ease; } @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } } .url-section .hint { font-size: 0.8rem; color: var(--text-dim); margin-bottom: 10px; display: flex; align-items: center; justify-content: center; gap: 6px; } .url-row { display: flex; gap: 8px; margin-bottom: 12px; } .url-row input { flex: 1; padding: 10px 12px; background: var(--bg); border: 1px solid var(--border); border-radius: 8px; color: var(--accent); font-size: 0.82rem; font-family: monospace; outline: none; } .url-row input:focus { border-color: var(--accent); } .copy-btn { padding: 10px 14px; background: var(--accent); color: #000; border: none; border-radius: 8px; cursor: pointer; font-size: 0.85rem; font-weight: 600; transition: all 0.2s; display: flex; align-items: center; gap: 5px; min-width: 70px; justify-content: center; } .copy-btn:hover { opacity: 0.9; transform: scale(1.02); } .copy-btn.copied { background: var(--success); color: white; } /* QR Code */ .qr-container { margin-top: 12px; padding-top: 12px; border-top: 1px solid var(--border); } .qr-container p { font-size: 0.75rem; color: var(--text-dim); margin-bottom: 10px; } #qrcode { display: inline-block; padding: 8px; background: white; border-radius: 8px; } #qrcode canvas { display: block; } /* Countdown */ .countdown { margin-top: 15px; font-size: 0.85rem; color: var(--text-dim); display: none; } .countdown span { color: var(--accent); font-weight: 600; font-size: 1.1rem; } /* Toast */ .toast { position: fixed; bottom: 25px; left: 50%; transform: translateX(-50%) translateY(100px); background: var(--success); color: white; padding: 12px 20px; border-radius: 10px; font-size: 0.9rem; font-weight: 500; opacity: 0; transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55); z-index: 1000; display: flex; align-items: center; gap: 8px; } .toast.show { transform: translateX(-50%) translateY(0); opacity: 1; } .toast.warning { background: var(--warning); } /* Footer */ .admin-link { margin-top: 20px; font-size: 0.7rem; color: var(--border); } .admin-link a { color: var(--border); text-decoration: none; } .admin-link a:hover { color: var(--text-dim); } footer { margin-top: 25px; font-size: 0.75rem; color: var(--text-dim); } footer a { color: var(--accent); text-decoration: none; } /* Tip box */ .tip { margin-top: 10px; padding: 8px 12px; background: rgba(210, 153, 34, 0.1); border: 1px solid rgba(210, 153, 34, 0.3); border-radius: 6px; font-size: 0.75rem; color: var(--warning); display: none; } .tip.show { display: block; } </style></head><body><div class="container"><div class="logo">‚ö°</div><h1 id="headline">ESP8266 Beacon Spam</h1><p class="description" id="description">Open-source WiFi beacon spammer & captive portal for ESP8266/ESP32</p><div class="features"><div><span>üì°</span> 50+ fake WiFi networks</div><div><span>üåê</span> Customizable captive portal</div><div><span>‚öôÔ∏è</span> Web-based admin panel</div><div><span>üì±</span> BLE spam (ESP32)</div></div><button class="btn" id="connectBtn" onclick="advancedRedirect()"><span class="spinner"></span><span class="btn-text">View on GitHub</span></button><div class="tip" id="tip">üí° Tip: Open a real browser (Chrome/Safari) first, then the link will work!</div><div class="url-section" id="urlSection"><div class="hint">üìã Copy link or scan QR code:</div><div class="url-row"><input type="text" id="urlInput" readonly value=""><button class="copy-btn" id="copyBtn" onclick="copyUrl()"><span id="copyIcon">üìã</span><span id="copyText">Copy</span></button></div><div class="qr-container"><p>üì± Scan with your camera app:</p><div id="qrcode"></div></div></div><div class="countdown" id="countdown"> Redirecting in <span id="timer">5</span> seconds... </div><div class="admin-link"><a href="/admin">‚öôÔ∏è Admin Panel</a></div></div><div class="toast" id="toast"></div><footer> Made with ‚ù§Ô∏è by <a href="https://github.com/John-Varghese-EH" target="_blank">John-Varghese-EH</a></footer><script> // Minimal QR Code generator var QRCode = function () { function a(a) { this.mode = c.MODE_8BIT_BYTE; this.data = a; this.parsedData = []; for (var b = [], d = 0; d < this.data.length; d++) { var e = this.data.charCodeAt(d); e > 65536 ? (b[0] = 240 | (1835008 & e) >>> 18, b[1] = 128 | (258048 & e) >>> 12, b[2] = 128 | (4032 & e) >>> 6, b[3] = 128 | 63 & e) : e > 2048 ? (b[0] = 224 | (61440 & e) >>> 12, b[1] = 128 | (4032 & e) >>> 6, b[2] = 128 | 63 & e) : e > 128 ? (b[0] = 192 | (1984 & e) >>> 6, b[1] = 128 | 63 & e) : b[0] = e; for (var f = 0; f < b.length; f++)this.parsedData.push(b[f]) } this.parsedData.length != this.data.length && (this.parsedData.unshift(191), this.parsedData.unshift(187), this.parsedData.unshift(239)) } function b(a, b) { this.typeNumber = a; this.errorCorrectLevel = b; this.modules = null; this.moduleCount = 0; this.dataCache = null; this.dataList = [] } function i(a, b) { if (void 0 == a.length) throw Error(a.length + "/" + b); for (var c = 0; c < a.length && 0 == a[c];)c++; this.num = Array(a.length - c + b); for (var d = 0; d < a.length - c; d++)this.num[d] = a[c + d] } function j(a, b) { this.totalCount = a; this.dataCount = b } function k() { this.buffer = []; this.length = 0 } a.prototype = { getLength: function () { return this.parsedData.length }, write: function (a) { for (var b = 0; b < this.parsedData.length; b++)a.put(this.parsedData[b], 8) } }; b.prototype = { addData: function (b) { this.dataList.push(new a(b)); this.dataCache = null }, isDark: function (a, b) { if (0 > a || this.moduleCount <= a || 0 > b || this.moduleCount <= b) throw Error(a + "," + b); return this.modules[a][b] }, getModuleCount: function () { return this.moduleCount }, make: function () { this.makeImpl(!1, this.getBestMaskPattern()) }, makeImpl: function (a, c) { this.moduleCount = 4 * this.typeNumber + 17; this.modules = Array(this.moduleCount); for (var d = 0; d < this.moduleCount; d++) { this.modules[d] = Array(this.moduleCount); for (var e = 0; e < this.moduleCount; e++)this.modules[d][e] = null } this.setupPositionProbePattern(0, 0); this.setupPositionProbePattern(this.moduleCount - 7, 0); this.setupPositionProbePattern(0, this.moduleCount - 7); this.setupPositionAdjustPattern(); this.setupTimingPattern(); this.setupTypeInfo(a, c); 7 <= this.typeNumber && this.setupTypeNumber(a); null == this.dataCache && (this.dataCache = b.createData(this.typeNumber, this.errorCorrectLevel, this.dataList)); this.mapData(this.dataCache, c) }, setupPositionProbePattern: function (a, b) { for (var c = -1; 7 >= c; c++)if (!(-1 >= a + c || this.moduleCount <= a + c)) for (var d = -1; 7 >= d; d++)-1 >= b + d || this.moduleCount <= b + d || (this.modules[a + c][b + d] = 0 <= c && 6 >= c && (0 == d || 6 == d) || 0 <= d && 6 >= d && (0 == c || 6 == c) || 2 <= c && 4 >= c && 2 <= d && 4 >= d ? !0 : !1) }, getBestMaskPattern: function () { for (var a = 0, b = 0, c = 0; 8 > c; c++) { this.makeImpl(!0, c); var d = f.getLostPoint(this); if (0 == c || a > d) a = d, b = c } return b }, setupTimingPattern: function () { for (var a = 8; a < this.moduleCount - 8; a++)null == this.modules[a][6] && (this.modules[a][6] = 0 == a % 2); for (a = 8; a < this.moduleCount - 8; a++)null == this.modules[6][a] && (this.modules[6][a] = 0 == a % 2) }, setupPositionAdjustPattern: function () { for (var a = f.getPatternPosition(this.typeNumber), b = 0; b < a.length; b++)for (var c = 0; c < a.length; c++) { var d = a[b], e = a[c]; if (null == this.modules[d][e]) for (var g = -2; 2 >= g; g++)for (var h = -2; 2 >= h; h++)this.modules[d + g][e + h] = -2 == g || 2 == g || -2 == h || 2 == h || 0 == g && 0 == h ? !0 : !1 } }, setupTypeNumber: function (a) { for (var b = f.getBCHTypeNumber(this.typeNumber), c = 0; 18 > c; c++) { var d = !a && 1 == (b >> c & 1); this.modules[Math.floor(c / 3)][c % 3 + this.moduleCount - 8 - 3] = d } for (c = 0; 18 > c; c++)d = !a && 1 == (b >> c & 1), this.modules[c % 3 + this.moduleCount - 8 - 3][Math.floor(c / 3)] = d }, setupTypeInfo: function (a, b) { for (var c = f.getBCHTypeInfo(this.errorCorrectLevel << 3 | b), d = 0; 15 > d; d++) { var e = !a && 1 == (c >> d & 1); 6 > d ? this.modules[d][8] = e : 8 > d ? this.modules[d + 1][8] = e : this.modules[this.moduleCount - 15 + d][8] = e } for (d = 0; 15 > d; d++)e = !a && 1 == (c >> d & 1), 8 > d ? this.modules[8][this.moduleCount - d - 1] = e : 9 > d ? this.modules[8][15 - d - 1 + 1] = e : this.modules[8][15 - d - 1] = e; this.modules[this.moduleCount - 8][8] = !a }, mapData: function (a, b) { for (var c = -1, d = this.moduleCount - 1, e = 7, g = 0, h = this.moduleCount - 1; 0 < h; h -= 2)for (6 == h && h--; ;) { for (var i = 0; 2 > i; i++)if (null == this.modules[d][h - i]) { var j = !1; g < a.length && (j = 1 == (a[g] >>> e & 1)); f.getMask(b, d, h - i) && (j = !j); this.modules[d][h - i] = j; e--; -1 > e && (g++, e = 7) } d += c; if (0 > d || this.moduleCount <= d) { d -= c; c = -c; break } } } }; b.PAD0 = 236; b.PAD1 = 17; b.createData = function (a, c, d) { for (var e = j.getRSBlocks(a, c), g = new k, h = 0; h < d.length; h++) { var i = d[h]; g.put(i.mode, 4); g.put(i.getLength(), f.getLengthInBits(i.mode, a)); i.write(g) } for (h = a = 0; h < e.length; h++)a += e[h].dataCount; if (g.getLengthInBits() > 8 * a) throw Error("code length overflow. (" + g.getLengthInBits() + ">" + 8 * a + ")"); for (g.getLengthInBits() + 4 <= 8 * a && g.put(0, 4); 0 != g.getLengthInBits() % 8;)g.putBit(!1); for (; !(g.getLengthInBits() >= 8 * a);) { g.put(b.PAD0, 8); if (g.getLengthInBits() >= 8 * a) break; g.put(b.PAD1, 8) } return b.createBytes(g, e) }; b.createBytes = function (a, b) { for (var c = 0, d = 0, e = 0, g = Array(b.length), h = Array(b.length), j = 0; j < b.length; j++) { var k = b[j].dataCount, l = b[j].totalCount - k, d = Math.max(d, k), e = Math.max(e, l); g[j] = Array(k); for (var m = 0; m < g[j].length; m++)g[j][m] = 255 & a.buffer[m + c]; c += k; m = f.getErrorCorrectPolynomial(l); k = (new i(g[j], m.getLength() - 1)).mod(m); h[j] = Array(m.getLength() - 1); for (m = 0; m < h[j].length; m++)l = m + k.getLength() - h[j].length, h[j][m] = 0 <= l ? k.get(l) : 0 } for (m = c = 0; m < b.length; m++)c += b[m].totalCount; c = Array(c); for (m = j = 0; m < d; m++)for (a = 0; a < b.length; a++)m < g[a].length && (c[j++] = g[a][m]); for (m = 0; m < e; m++)for (a = 0; a < b.length; a++)m < h[a].length && (c[j++] = h[a][m]); return c }; for (var c = { MODE_NUMBER: 1, MODE_ALPHA_NUM: 2, MODE_8BIT_BYTE: 4, MODE_KANJI: 8 }, f = { PATTERN_POSITION_TABLE: [[], [6, 18], [6, 22], [6, 26], [6, 30], [6, 34], [6, 22, 38], [6, 24, 42], [6, 26, 46], [6, 28, 50], [6, 30, 54], [6, 32, 58], [6, 34, 62], [6, 26, 46, 66], [6, 26, 48, 70], [6, 26, 50, 74], [6, 30, 54, 78], [6, 30, 56, 82], [6, 30, 58, 86], [6, 34, 62, 90], [6, 28, 50, 72, 94], [6, 26, 50, 74, 98], [6, 30, 54, 78, 102], [6, 28, 54, 80, 106], [6, 32, 58, 84, 110], [6, 30, 58, 86, 114], [6, 34, 62, 90, 118], [6, 26, 50, 74, 98, 122], [6, 30, 54, 78, 102, 126], [6, 26, 52, 78, 104, 130], [6, 30, 56, 82, 108, 134], [6, 34, 60, 86, 112, 138], [6, 30, 58, 86, 114, 142], [6, 34, 62, 90, 118, 146], [6, 30, 54, 78, 102, 126, 150], [6, 24, 50, 76, 102, 128, 154], [6, 28, 54, 80, 106, 132, 158], [6, 32, 58, 84, 110, 136, 162], [6, 26, 54, 82, 110, 138, 166], [6, 30, 58, 86, 114, 142, 170]], G15: 1335, G18: 7973, G15_MASK: 21522, getBCHTypeInfo: function (a) { for (var b = a << 10; 0 <= f.getBCHDigit(b) - f.getBCHDigit(f.G15);)b ^= f.G15 << f.getBCHDigit(b) - f.getBCHDigit(f.G15); return (a << 10 | b) ^ f.G15_MASK }, getBCHTypeNumber: function (a) { for (var b = a << 12; 0 <= f.getBCHDigit(b) - f.getBCHDigit(f.G18);)b ^= f.G18 << f.getBCHDigit(b) - f.getBCHDigit(f.G18); return a << 12 | b }, getBCHDigit: function (a) { for (var b = 0; 0 != a;)b++, a >>>= 1; return b }, getPatternPosition: function (a) { return f.PATTERN_POSITION_TABLE[a - 1] }, getMask: function (a, b, c) { switch (a) { case 0: return 0 == (b + c) % 2; case 1: return 0 == b % 2; case 2: return 0 == c % 3; case 3: return 0 == (b + c) % 3; case 4: return 0 == (Math.floor(b / 2) + Math.floor(c / 3)) % 2; case 5: return 0 == b * c % 2 + b * c % 3; case 6: return 0 == (b * c % 2 + b * c % 3) % 2; case 7: return 0 == (b * c % 3 + (b + c) % 2) % 2; default: throw Error("bad maskPattern:" + a); } }, getErrorCorrectPolynomial: function (a) { for (var b = new i([1], 0), c = 0; c < a; c++)b = b.multiply(new i([1, g.gexp(c)], 0)); return b }, getLengthInBits: function (a, b) { if (1 <= b && 10 > b) switch (a) { case c.MODE_NUMBER: return 10; case c.MODE_ALPHA_NUM: return 9; case c.MODE_8BIT_BYTE: return 8; case c.MODE_KANJI: return 8 } else if (27 > b) switch (a) { case c.MODE_NUMBER: return 12; case c.MODE_ALPHA_NUM: return 11; case c.MODE_8BIT_BYTE: return 16; case c.MODE_KANJI: return 10 } else if (41 > b) switch (a) { case c.MODE_NUMBER: return 14; case c.MODE_ALPHA_NUM: return 13; case c.MODE_8BIT_BYTE: return 16; case c.MODE_KANJI: return 12 } else throw Error("type:" + a + " num:" + b); }, getLostPoint: function (a) { for (var b = a.getModuleCount(), c = 0, d = 0; d < b; d++)for (var e = 0; e < b; e++) { for (var f = 0, g = a.isDark(d, e), h = -1; 1 >= h; h++)if (!(0 > d + h || b <= d + h)) for (var i = -1; 1 >= i; i++)0 > e + i || b <= e + i || 0 == h && 0 == i || g == a.isDark(d + h, e + i) && f++; 5 < f && (c += 3 + f - 5) } for (d = 0; d < b - 1; d++)for (e = 0; e < b - 1; e++)if (f = 0, a.isDark(d, e) && f++, a.isDark(d + 1, e) && f++, a.isDark(d, e + 1) && f++, a.isDark(d + 1, e + 1) && f++, 0 == f || 4 == f) c += 3; for (d = 0; d < b; d++)for (e = 0; e < b - 6; e++)a.isDark(d, e) && !a.isDark(d, e + 1) && a.isDark(d, e + 2) && a.isDark(d, e + 3) && a.isDark(d, e + 4) && !a.isDark(d, e + 5) && a.isDark(d, e + 6) && (c += 40); for (e = 0; e < b; e++)for (d = 0; d < b - 6; d++)a.isDark(d, e) && !a.isDark(d + 1, e) && a.isDark(d + 2, e) && a.isDark(d + 3, e) && a.isDark(d + 4, e) && !a.isDark(d + 5, e) && a.isDark(d + 6, e) && (c += 40); for (e = f = 0; e < b; e++)for (d = 0; d < b; d++)a.isDark(d, e) && f++; return c + 10 * (Math.abs(100 * f / b / b - 50) / 5) } }, g = { glog: function (a) { if (1 > a) throw Error("glog(" + a + ")"); return g.LOG_TABLE[a] }, gexp: function (a) { for (; 0 > a;)a += 255; for (; 256 <= a;)a -= 255; return g.EXP_TABLE[a] }, EXP_TABLE: Array(256), LOG_TABLE: Array(256) }, h = 0; 8 > h; h++)g.EXP_TABLE[h] = 1 << h; for (h = 8; 256 > h; h++)g.EXP_TABLE[h] = g.EXP_TABLE[h - 4] ^ g.EXP_TABLE[h - 5] ^ g.EXP_TABLE[h - 6] ^ g.EXP_TABLE[h - 8]; for (h = 0; 255 > h; h++)g.LOG_TABLE[g.EXP_TABLE[h]] = h; i.prototype = { get: function (a) { return this.num[a] }, getLength: function () { return this.num.length }, multiply: function (a) { for (var b = Array(this.getLength() + a.getLength() - 1), c = 0; c < this.getLength(); c++)for (var d = 0; d < a.getLength(); d++)b[c + d] ^= g.gexp(g.glog(this.get(c)) + g.glog(a.get(d))); return new i(b, 0) }, mod: function (a) { if (0 > this.getLength() - a.getLength()) return this; for (var b = g.glog(this.get(0)) - g.glog(a.get(0)), c = Array(this.getLength()), d = 0; d < this.getLength(); d++)c[d] = this.get(d); for (d = 0; d < a.getLength(); d++)c[d] ^= g.gexp(g.glog(a.get(d)) + b); return (new i(c, 0)).mod(a) } }; j.RS_BLOCK_TABLE = [[1, 26, 19], [1, 26, 16], [1, 26, 13], [1, 26, 9], [1, 44, 34], [1, 44, 28], [1, 44, 22], [1, 44, 16], [1, 70, 55], [1, 70, 44], [2, 35, 17], [2, 35, 13], [1, 100, 80], [2, 50, 32], [2, 50, 24], [4, 25, 9], [1, 134, 108], [2, 67, 43], [2, 33, 15, 2, 34, 16], [2, 33, 11, 2, 34, 12], [2, 86, 68], [4, 43, 27], [4, 43, 19], [4, 43, 15], [2, 98, 78], [4, 49, 31], [2, 32, 14, 4, 33, 15], [4, 39, 13, 1, 40, 14], [2, 121, 97], [2, 60, 38, 2, 61, 39], [4, 40, 18, 2, 41, 19], [4, 40, 14, 2, 41, 15], [2, 146, 116], [3, 58, 36, 2, 59, 37], [4, 36, 16, 4, 37, 17], [4, 36, 12, 4, 37, 13], [2, 86, 68, 2, 87, 69], [4, 69, 43, 1, 70, 44], [6, 43, 19, 2, 44, 20], [6, 43, 15, 2, 44, 16], [4, 101, 81], [1, 80, 50, 4, 81, 51], [4, 50, 22, 4, 51, 23], [3, 36, 12, 8, 37, 13], [2, 116, 92, 2, 117, 93], [6, 58, 36, 2, 59, 37], [4, 46, 20, 6, 47, 21], [7, 42, 14, 4, 43, 15], [4, 133, 107], [8, 59, 37, 1, 60, 38], [8, 44, 20, 4, 45, 21], [12, 33, 11, 4, 34, 12], [3, 145, 115, 1, 146, 116], [4, 64, 40, 5, 65, 41], [11, 36, 16, 5, 37, 17], [11, 36, 12, 5, 37, 13], [5, 109, 87, 1, 110, 88], [5, 65, 41, 5, 66, 42], [5, 54, 24, 7, 55, 25], [11, 36, 12], [5, 122, 98, 1, 123, 99], [7, 73, 45, 3, 74, 46], [15, 43, 19, 2, 44, 20], [3, 45, 15, 13, 46, 16], [1, 135, 107, 5, 136, 108], [10, 74, 46, 1, 75, 47], [1, 50, 22, 15, 51, 23], [2, 42, 14, 17, 43, 15], [5, 150, 120, 1, 151, 121], [9, 69, 43, 4, 70, 44], [17, 50, 22, 1, 51, 23], [2, 42, 14, 19, 43, 15], [3, 141, 113, 4, 142, 114], [3, 70, 44, 11, 71, 45], [17, 47, 21, 4, 48, 22], [9, 39, 13, 16, 40, 14], [3, 135, 107, 5, 136, 108], [3, 67, 41, 13, 68, 42], [15, 54, 24, 5, 55, 25], [15, 43, 15, 10, 44, 16], [4, 144, 116, 4, 145, 117], [17, 68, 42], [17, 50, 22, 6, 51, 23], [19, 46, 16, 6, 47, 17], [2, 139, 111, 7, 140, 112], [17, 74, 46], [7, 54, 24, 16, 55, 25], [34, 37, 13], [4, 151, 121, 5, 152, 122], [4, 75, 47, 14, 76, 48], [11, 54, 24, 14, 55, 25], [16, 45, 15, 14, 46, 16], [6, 147, 117, 4, 148, 118], [6, 73, 45, 14, 74, 46], [11, 54, 24, 16, 55, 25], [30, 46, 16, 2, 47, 17], [8, 132, 106, 4, 133, 107], [8, 75, 47, 13, 76, 48], [7, 54, 24, 22, 55, 25], [22, 45, 15, 13, 46, 16], [10, 142, 114, 2, 143, 115], [19, 74, 46, 4, 75, 47], [28, 50, 22, 6, 51, 23], [33, 46, 16, 4, 47, 17], [8, 152, 122, 4, 153, 123], [22, 73, 45, 3, 74, 46], [8, 53, 23, 26, 54, 24], [12, 45, 15, 28, 46, 16], [3, 147, 117, 10, 148, 118], [3, 73, 45, 23, 74, 46], [4, 54, 24, 31, 55, 25], [11, 45, 15, 31, 46, 16], [7, 146, 116, 7, 147, 117], [21, 73, 45, 7, 74, 46], [1, 53, 23, 37, 54, 24], [19, 45, 15, 26, 46, 16], [5, 145, 115, 10, 146, 116], [19, 75, 47, 10, 76, 48], [15, 54, 24, 25, 55, 25], [23, 45, 15, 25, 46, 16], [13, 145, 115, 3, 146, 116], [2, 74, 46, 29, 75, 47], [42, 54, 24, 1, 55, 25], [23, 45, 15, 28, 46, 16], [17, 145, 115], [10, 74, 46, 23, 75, 47], [10, 54, 24, 35, 55, 25], [19, 45, 15, 35, 46, 16], [17, 145, 115, 1, 146, 116], [14, 74, 46, 21, 75, 47], [29, 54, 24, 19, 55, 25], [11, 45, 15, 46, 46, 16], [13, 145, 115, 6, 146, 116], [14, 74, 46, 23, 75, 47], [44, 54, 24, 7, 55, 25], [59, 46, 16, 1, 47, 17], [12, 151, 121, 7, 152, 122], [12, 75, 47, 26, 76, 48], [39, 54, 24, 14, 55, 25], [22, 45, 15, 41, 46, 16], [6, 151, 121, 14, 152, 122], [6, 75, 47, 34, 76, 48], [46, 54, 24, 10, 55, 25], [2, 45, 15, 64, 46, 16], [17, 152, 122, 4, 153, 123], [29, 74, 46, 14, 75, 47], [49, 54, 24, 10, 55, 25], [24, 45, 15, 46, 46, 16], [4, 152, 122, 18, 153, 123], [13, 74, 46, 32, 75, 47], [48, 54, 24, 14, 55, 25], [42, 45, 15, 32, 46, 16], [20, 147, 117, 4, 148, 118], [40, 75, 47, 7, 76, 48], [43, 54, 24, 22, 55, 25], [10, 45, 15, 67, 46, 16], [19, 148, 118, 6, 149, 119], [18, 75, 47, 31, 76, 48], [34, 54, 24, 34, 55, 25], [20, 45, 15, 61, 46, 16]]; j.getRSBlocks = function (a, b) { var c = j.getRsBlockTable(a, b); if (void 0 == c) throw Error("bad rs block @ typeNumber:" + a + "/errorCorrectLevel:" + b); for (var d = c.length / 3, e = [], f = 0; f < d; f++)for (var g = c[3 * f + 0], h = c[3 * f + 1], i = c[3 * f + 2], k = 0; k < g; k++)e.push(new j(h, i)); return e }; j.getRsBlockTable = function (a, b) { switch (b) { case 1: return j.RS_BLOCK_TABLE[4 * (a - 1) + 0]; case 0: return j.RS_BLOCK_TABLE[4 * (a - 1) + 1]; case 3: return j.RS_BLOCK_TABLE[4 * (a - 1) + 2]; case 2: return j.RS_BLOCK_TABLE[4 * (a - 1) + 3] } }; k.prototype = { get: function (a) { return 1 == (this.buffer[Math.floor(a / 8)] >>> 7 - a % 8 & 1) }, put: function (a, b) { for (var c = 0; c < b; c++)this.putBit(1 == (a >>> b - c - 1 & 1)) }, getLengthInBits: function () { return this.length }, putBit: function (a) { var b = Math.floor(this.length / 8); this.buffer.length <= b && this.buffer.push(0); a && (this.buffer[b] |= 128 >>> this.length % 8); this.length++ } }; return b }(); function makeQR(text, el) { var q = new QRCode(4, 1); q.addData(text); q.make(); var c = document.createElement('canvas'), s = 3, m = q.getModuleCount(); c.width = c.height = m * s; var x = c.getContext('2d'); for (var r = 0; r < m; r++)for (var l = 0; l < m; l++) { x.fillStyle = q.isDark(r, l) ? '#000' : '#fff'; x.fillRect(l * s, r * s, s, s); } el.innerHTML = ''; el.appendChild(c); } </script><script> let redirectUrl = 'https://github.com/John-Varghese-EH/ESP8266-BeaconSpamAds'; let redirectAttempted = false; function showToast(msg, isWarning) { const toast = document.getElementById('toast'); toast.innerHTML = msg; toast.classList.toggle('warning', isWarning); toast.classList.add('show'); setTimeout(() => toast.classList.remove('show'), 3000); } function showUrlSection() { const section = document.getElementById('urlSection'); section.classList.add('show'); document.getElementById('urlInput').value = redirectUrl; // Generate QR code try { makeQR(redirectUrl, document.getElementById('qrcode')); } catch (e) { } } function copyUrl() { const input = document.getElementById('urlInput'); const btn = document.getElementById('copyBtn'); const icon = document.getElementById('copyIcon'); const text = document.getElementById('copyText'); input.select(); input.setSelectionRange(0, 99999); const success = () => { btn.classList.add('copied'); icon.textContent = '‚úì'; text.textContent = 'Copied!'; showToast('‚úì Link copied to clipboard!', false); setTimeout(() => { btn.classList.remove('copied'); icon.textContent = 'üìã'; text.textContent = 'Copy'; }, 2000); }; if (navigator.clipboard && navigator.clipboard.writeText) { navigator.clipboard.writeText(redirectUrl).then(success).catch(() => { try { document.execCommand('copy'); success(); } catch (e) { showToast('‚ö† Please copy manually', true); } }); } else { try { document.execCommand('copy'); success(); } catch (e) { showToast('‚ö† Please copy manually', true); } } } function advancedRedirect() { const btn = document.getElementById('connectBtn'); btn.classList.add('loading'); // Show URL section immediately as fallback setTimeout(() => showUrlSection(), 300); // Try multiple redirect methods setTimeout(() => { btn.classList.remove('loading'); // Method 1: window.open try { const w = window.open(redirectUrl, '_blank'); if (w) { showToast('‚úì Opening in new tab...', false); return; } } catch (e) { } // Method 2: location.replace try { window.location.replace(redirectUrl); return; } catch (e) { } // Method 3: location.href try { window.location.href = redirectUrl; return; } catch (e) { } // Method 4: top.location try { if (window.top !== window.self) { window.top.location.href = redirectUrl; return; } } catch (e) { } // Method 5: Create and click a link try { const a = document.createElement('a'); a.href = redirectUrl; a.target = '_blank'; a.rel = 'noopener'; document.body.appendChild(a); a.click(); document.body.removeChild(a); return; } catch (e) { } // All failed btn.classList.add('shake'); setTimeout(() => btn.classList.remove('shake'), 500); document.getElementById('tip').classList.add('show'); showToast('‚ö† Redirect blocked by captive portal', true); }, 500); } // Long-press to copy let pressTimer; const btn = document.getElementById('connectBtn'); btn.addEventListener('touchstart', () => { pressTimer = setTimeout(() => { showUrlSection(); copyUrl(); }, 800); }); btn.addEventListener('touchend', () => clearTimeout(pressTimer)); btn.addEventListener('mousedown', () => { pressTimer = setTimeout(() => { showUrlSection(); copyUrl(); }, 800); }); btn.addEventListener('mouseup', () => clearTimeout(pressTimer)); btn.addEventListener('mouseleave', () => clearTimeout(pressTimer)); // Load config fetch('/api/public_data') .then(res => res.json()) .then(data => { if (data.redirectUrl) { redirectUrl = data.redirectUrl; document.getElementById('urlInput').value = redirectUrl; } if (data.advertisingHeadline) document.getElementById('headline').innerText = data.advertisingHeadline; if (data.advertisingDescription) document.getElementById('description').innerText = data.advertisingDescription; if (data.buttonText) document.querySelector('.btn-text').innerText = data.buttonText; if (data.autoRedirectDelay && data.autoRedirectDelay > 0) { let secs = data.autoRedirectDelay; const countdownEl = document.getElementById('countdown'); const timerEl = document.getElementById('timer'); countdownEl.style.display = 'block'; timerEl.innerText = secs; const interval = setInterval(() => { secs--; timerEl.innerText = secs; if (secs <= 0) { clearInterval(interval); advancedRedirect(); } }, 1000); } }) .catch(e => console.log('Error:', e)); </script></body></html>)rawliteral";
